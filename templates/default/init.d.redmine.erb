#!/bin/bash

# This script place to /etc/init.d/redmine

# This script call redmine.sh at base directory.
# redmine.sh use rvm environment and invoke unicorn by root uid.
# unicorn invoke worker process by other uid.

BASEDIR="<%= @path %>"
DAEMONSCRIPT="$BASEDIR/redmine.sh"
DAEMONOPTIONS="production"

case "$1" in
  start)
    $DAEMONSCRIPT $DAEMONOPTIONS start
    ;;
  stop)
    $DAEMONSCRIPT $DAEMONOPTIONS stop
    ;;
  reload)
    $DAEMONSCRIPT $DAEMONOPTIONS reload
    ;;
  restart)
    $DAEMONSCRIPT $DAEMONOPTIONS restart
    ;;
  *)
    echo "Usage: redmine.sh {start|stop|reload|restart}"
    exit 1
esac

exit 0
